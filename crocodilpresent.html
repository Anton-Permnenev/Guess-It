<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    <script>
        navigator.getUserMedia = navigator.getUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia;
        navigator.getUserMedia({audio: false, video: true}, gotStream, streamError);

        function gotStream(stream) {
            document.querySelector('video').src = URL.createObjectURL(stream);
        }

        function streamError(error) {
            console.log(error);
        }
    </script>


    <style type="text/css">
        body {
            padding-top: 100px;
        }
    </style>


    <!-- Libs and Scripts -->
    <script src="https://cdn.pubnub.com/pubnub.min.js"></script>
    <script src="http://stephenlb.github.io/webrtc-sdk/js/webrtc.js"></script>
    <script>(function () {
        // ~Warning~ You must get your own API Keys for non-demo purposes.
        // ~Warning~ Get your PubNub API Keys: http://www.pubnub.com/get-started/
        // The phone *number* can by any string value
        var rand = (1 + Math.random() * (1000)) ^ 0;
        var passphrase;
        var num = rand.toString();

        var phone = PHONE({
            number: num,
            publish_key: 'pub-c-ccca9b35-6dce-48e8-8b92-a19ba6376d04',
            subscribe_key: 'sub-c-673b9e80-6787-11e4-814d-02ee2ddab7fe',
            ssl: true
        });
        $(document).ready(
                function () {
                    $("#num").text(num);
                }
        );


        // As soon as the phone is ready we can make calls
        phone.ready(function () {

            PUBNUB.bind('mousedown,touchstart', PUBNUB.$('trygess'), function () {
                passphrase = PUBNUB.$('word').value;
                document.getElementById('ww').innerHTML = passphrase;
                document.getElementById('word').value = "";
            });
        });

        // When Call Comes In or is to be Connected
        phone.receive(function (session) {

            // Display Your Friend's Live Video
            session.connected(function (session) {
                PUBNUB.$('video-out').appendChild(session.video);
            });
            session.thumbnail(function (session) {
                var img_self = PUBNUB.$('video-self');
                var body = document.getElementsByTagName('body')[0];
                var image = session.image;

                body.appendChild(img_self);
            });
        });

    })();


    function changeword() {
        passphrase = document.getElementById('word').value;
        document.getElementById('ww').innerHTML = passphrase;
        document.getElementById('word').value = "";
    }
    </script>
</head>
<body>
<header>
    <nav id="myNavbar" class="navbar navbar-default navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbarCollapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Best navbar</a>
            </div>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="index.html" target="_blank">Home</a></li>
                    <li><a href="http://www.google.com" target="_blank">Google</a></li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<div class="container">
<div class="col-lg-3">
    <div class="row">
        <div class="col-lg-6"> Your number is:</div>
        <div id="num" class="col-lg-6">
        </div>
    </div>
    <div class="row"><br></div>

    <div class="row">
        <div class="col-lg-6"> Your Word is:</div>
        <div id="ww" class="col-lg-6"></div>
    </div>
    <div class="row"><br></div>
    <div class="row">
        <div align="center">
            <input id="word" placeholder="Set the word">
            <button id="tryguess" name="guess" onclick="changeword()">Set word</button>
        </div>
    </div>
</div>
<div class="col-lg-9">
    <div align="center">
        <video autoplay></video>
    </div>
</div>


</div>


</body>
</html>